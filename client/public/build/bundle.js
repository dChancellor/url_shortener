var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function i(e){return document.createTextNode(e)}function d(){return i(" ")}function f(){return i("")}function g(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function h(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function p(e,t,n){e.classList[n?"add":"remove"](t)}let $;function v(e){$=e}function b(){if(!$)throw new Error("Function called outside component initialization");return $}function y(){const e=b();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const l=function(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}(t,n);r.slice().forEach((t=>{t.call(e,l)}))}}}const w=[],x=[],k=[],C=[],q=Promise.resolve();let _=!1;function S(e){k.push(e)}let E=!1;const j=new Set;function N(){if(!E){E=!0;do{for(let e=0;e<w.length;e+=1){const t=w[e];v(t),T(t.$$)}for(v(null),w.length=0;x.length;)x.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];j.has(t)||(j.add(t),t())}k.length=0}while(w.length);for(;C.length;)C.pop()();_=!1,E=!1,j.clear()}}function T(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const L=new Set;let M;function O(){M={r:0,c:[],p:M}}function P(){M.r||r(M.c),M=M.p}function A(e,t){e&&e.i&&(L.delete(e),e.i(t))}function H(e,t,n,r){if(e&&e.o){if(L.has(e))return;L.add(e),M.c.push((()=>{L.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function J(e,t){H(e,1,1,(()=>{t.delete(e.key)}))}function z(e){e&&e.c()}function B(e,n,o,s){const{fragment:c,on_mount:u,on_destroy:a,after_update:i}=e.$$;c&&c.m(n,o),s||S((()=>{const n=u.map(t).filter(l);a?a.push(...n):r(n),e.$$.on_mount=[]})),i.forEach(S)}function I(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(w.push(e),_||(_=!0,q.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,l,o,s,c,a,i,d=[-1]){const f=$;v(t);const g=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:l.context||[]),callbacks:n(),dirty:d,skip_bound:!1,root:l.target||f.$$.root};i&&i(g.root);let m=!1;if(g.ctx=o?o(t,l.props||{},((e,n,...r)=>{const l=r.length?r[0]:n;return g.ctx&&c(g.ctx[e],g.ctx[e]=l)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](l),m&&U(t,e)),n})):[],g.update(),m=!0,r(g.before_update),g.fragment=!!s&&s(g.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);g.fragment&&g.fragment.l(e),e.forEach(u)}else g.fragment&&g.fragment.c();l.intro&&A(t.$$.fragment),B(t,l.target,l.anchor,l.customElement),N()}v(f)}class F{$destroy(){I(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function G(t){let n,r,l;return{c(){n=a("div"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="arrow svelte-16qbxwn" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>',m(n,"class","button svelte-16qbxwn")},m(e,o){c(e,n,o),r||(l=g(n,"click",t[1]),r=!0)},p:e,i:e,o:e,d(e){e&&u(n),r=!1,l()}}}function V(e){const t=y();return[t,()=>t("decrement")]}class D extends F{constructor(e){super(),W(this,e,V,G,o,{})}}function K(t){let n,r,l;return{c(){n=a("div"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="arrow svelte-1vr9oeo" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',m(n,"class","button svelte-1vr9oeo")},m(e,o){c(e,n,o),r||(l=g(n,"click",t[1]),r=!0)},p:e,i:e,o:e,d(e){e&&u(n),r=!1,l()}}}function Q(e){const t=y();return[t,()=>t("increment")]}class R extends F{constructor(e){super(),W(this,e,Q,K,o,{})}}function X(e){let t;return{c(){t=a("span"),t.textContent="required!",m(t,"class","required-message svelte-1qfpi5m")},m(e,n){c(e,t,n)},d(e){e&&u(t)}}}function Y(t){let n,l,o,s,i,h=t[2]&&X();return{c(){n=a("p"),l=d(),h&&h.c(),o=f(),m(n,"class","editable field svelte-1qfpi5m"),m(n,"contenteditable","true"),m(n,"placeholder",t[0]),void 0===t[3]&&S((()=>t[8].call(n))),p(n,"error",t[2]),p(n,"required",t[1]),p(n,"empty",t[4])},m(e,r){c(e,n,r),void 0!==t[3]&&(n.textContent=t[3]),c(e,l,r),h&&h.m(e,r),c(e,o,r),s||(i=[g(n,"blur",t[7]),g(n,"input",t[8])],s=!0)},p(e,[t]){1&t&&m(n,"placeholder",e[0]),8&t&&e[3]!==n.textContent&&(n.textContent=e[3]),4&t&&p(n,"error",e[2]),2&t&&p(n,"required",e[1]),16&t&&p(n,"empty",e[4]),e[2]?h||(h=X(),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i:e,o:e,d(e){e&&u(n),e&&u(l),h&&h.d(e),e&&u(o),s=!1,r(i)}}}function Z(e,t,n){let r,l;const o=y();let{placeholder:s}=t,{required:c}=t,{value:u}=t,{error:a}=t;return e.$$set=e=>{"placeholder"in e&&n(0,s=e.placeholder),"required"in e&&n(1,c=e.required),"value"in e&&n(6,u=e.value),"error"in e&&n(2,a=e.error)},e.$$.update=()=>{64&e.$$.dirty&&n(3,r=u),8&e.$$.dirty&&n(4,l=""===r)},[s,c,a,r,l,o,u,()=>o("save",r),function(){r=this.textContent,n(3,r),n(6,u)}]}class ee extends F{constructor(e){super(),W(this,e,Z,Y,o,{placeholder:0,required:1,value:6,error:2})}}const te="https://lws.api.chancellor.tech";function ne(e,t,n){const r=e.slice();return r[11]=t[n].name,r[12]=t[n].placeholder,r[13]=t[n].required,r[2]=t[n].error,r[14]=t[n].value,r[15]=t,r[16]=n,r}function re(e,t){let n,r,l,o,f,g=t[11]+"";return o=new ee({props:{value:t[14],placeholder:t[12],required:t[13],error:t[2]}}),o.$on("save",(function(...e){return t[8](t[14],t[15],t[16],...e)})),{key:e,first:null,c(){n=a("p"),r=i(g),l=d(),z(o.$$.fragment),m(n,"class","svelte-1577r8b"),this.first=n},m(e,t){c(e,n,t),s(n,r),c(e,l,t),B(o,e,t),f=!0},p(e,n){t=e,(!f||2&n)&&g!==(g=t[11]+"")&&h(r,g);const l={};2&n&&(l.value=t[14]),2&n&&(l.placeholder=t[12]),2&n&&(l.required=t[13]),2&n&&(l.error=t[2]),o.$set(l)},i(e){f||(A(o.$$.fragment,e),f=!0)},o(e){H(o.$$.fragment,e),f=!1},d(e){e&&u(n),e&&u(l),I(o,e)}}}function le(e){let t,n,l,o,f,p,$,v,b,y,w,x,k,C,q,_,S,E=[],j=new Map,N=e[1].fields;const T=e=>e[11];for(let t=0;t<N.length;t+=1){let n=ne(e,N,t),r=T(n);j.set(r,E[t]=re(r,n))}return{c(){t=a("h1"),n=i("Welcome to your voyage, "),l=i(e[0]),o=d(),f=a("div"),p=a("button"),p.textContent="New Short",$=d(),v=a("button"),v.textContent="New User",b=d(),y=a("button"),y.textContent="Logout",w=d(),x=a("div");for(let e=0;e<E.length;e+=1)E[e].c();k=d(),C=a("button"),C.textContent="Submit",m(t,"class","svelte-1577r8b"),m(p,"class","logged-in-buttons new-slug svelte-1577r8b"),m(v,"class","logged-in-buttons new-user svelte-1577r8b"),m(y,"class","logged-in-buttons logout svelte-1577r8b"),m(f,"class","button-row svelte-1577r8b"),m(C,"class","submit svelte-1577r8b"),m(x,"class","fields svelte-1577r8b")},m(r,u){c(r,t,u),s(t,n),s(t,l),c(r,o,u),c(r,f,u),s(f,p),s(f,$),s(f,v),s(f,b),s(f,y),c(r,w,u),c(r,x,u);for(let e=0;e<E.length;e+=1)E[e].m(x,null);s(x,k),s(x,C),q=!0,_||(S=[g(p,"click",e[5]),g(v,"click",e[6]),g(y,"click",e[7]),g(C,"click",e[9])],_=!0)},p(e,[t]){(!q||1&t)&&h(l,e[0]),2&t&&(N=e[1].fields,O(),E=function(e,t,n,r,l,o,s,c,u,a,i,d){let f=e.length,g=o.length,m=f;const h={};for(;m--;)h[e[m].key]=m;const p=[],$=new Map,v=new Map;for(m=g;m--;){const e=d(l,o,m),c=n(e);let u=s.get(c);u?r&&u.p(e,t):(u=a(c,e),u.c()),$.set(c,p[m]=u),c in h&&v.set(c,Math.abs(m-h[c]))}const b=new Set,y=new Set;function w(e){A(e,1),e.m(c,i),s.set(e.key,e),i=e.first,g--}for(;f&&g;){const t=p[g-1],n=e[f-1],r=t.key,l=n.key;t===n?(i=t.first,f--,g--):$.has(l)?!s.has(r)||b.has(r)?w(t):y.has(l)?f--:v.get(r)>v.get(l)?(y.add(r),w(t)):(b.add(l),f--):(u(n,s),f--)}for(;f--;){const t=e[f];$.has(t.key)||u(t,s)}for(;g;)w(p[g-1]);return p}(E,t,T,1,e,N,j,x,J,re,k,ne),P())},i(e){if(!q){for(let e=0;e<N.length;e+=1)A(E[e]);q=!0}},o(e){for(let e=0;e<E.length;e+=1)H(E[e]);q=!1},d(e){e&&u(t),e&&u(o),e&&u(f),e&&u(w),e&&u(x);for(let e=0;e<E.length;e+=1)E[e].d();_=!1,r(S)}}}function oe(e,t,n){let{user:r}=t,l=!1,o=[{name:"slug",fields:[{name:"slug",placeholder:"goog",required:!1,value:""},{name:"url",placeholder:"www.google.com",required:!0,value:""}],submit:async e=>{let t=e.reduce(((e,t)=>e={...e,[t.name]:t.value}),{});await(async({slug:e,url:t})=>fetch(`${te}/auth/newSlug`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e,url:t})}).then((e=>e.json())).then((e=>e.message?Promise.reject(e.message):e)).catch((e=>e)))(t)}},{name:"user",fields:[{name:"name",placeholder:"John",required:!0,value:""},{name:"googleId",placeholder:"12345",required:!0,value:""},{name:"email",placeholder:"john@fakeemail.com",required:!1,value:""}],submit:async e=>{let t=e.reduce(((e,t)=>e={...e,[t.name]:t.value}),{});await(async({name:e,googleId:t,email:n})=>fetch(`${te}/auth/newUser`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:e,googleId:t,email:n})}).then((e=>e.json())).then((e=>e.message?Promise.reject(e.message):e)).catch((e=>e)))(t)}}],s=o[0],c=e=>n(1,s=o.find((t=>t.name===e))),u=async()=>{n(2,l=s.fields.forEach((e=>e.required&&!e.value))),l||await s.submit(s.fields)};return e.$$set=e=>{"user"in e&&n(0,r=e.user)},[r,s,l,c,u,()=>c("slug"),()=>c("user"),()=>location.href=`${te}/logout`,(e,t,r,{detail:l})=>n(1,t[r].value=l,s),()=>u()]}class se extends F{constructor(e){super(),W(this,e,oe,le,o,{user:0})}}function ce(e){let t,n,l,o,i,h,p,$,v,b,y,w,x,k,C,q,_,S;$=new ee({props:{value:e[4],required:!0,error:e[5],placeholder:"www.google.com"}}),$.$on("save",e[13]);let E=e[7]&&ae(e),j=e[8]&&ie(),N=!e[8]&&""!=e[0][0].slug&&de(e),T=e[6]&&fe(e);return{c(){t=a("h1"),t.textContent="Voyage Across the Web",n=d(),l=a("button"),l.textContent="Login with Google",o=d(),i=a("div"),h=a("p"),h.textContent="or search for existing slugs",p=d(),z($.$$.fragment),v=d(),E&&E.c(),b=d(),y=a("button"),y.textContent="Submit",w=d(),j&&j.c(),x=d(),N&&N.c(),k=d(),T&&T.c(),C=f(),m(t,"class","svelte-15gnl5l"),m(l,"class","login svelte-15gnl5l"),m(h,"class","search-label svelte-15gnl5l"),m(i,"class","search-container svelte-15gnl5l"),m(y,"class","submit svelte-15gnl5l")},m(r,u){c(r,t,u),c(r,n,u),c(r,l,u),c(r,o,u),c(r,i,u),s(i,h),s(i,p),B($,i,null),s(i,v),E&&E.m(i,null),c(r,b,u),c(r,y,u),c(r,w,u),j&&j.m(r,u),c(r,x,u),N&&N.m(r,u),c(r,k,u),T&&T.m(r,u),c(r,C,u),q=!0,_||(S=[g(l,"click",e[12]),g(y,"click",e[15])],_=!0)},p(e,t){const n={};16&t&&(n.value=e[4]),32&t&&(n.error=e[5]),$.$set(n),e[7]?E?E.p(e,t):(E=ae(e),E.c(),E.m(i,null)):E&&(E.d(1),E=null),e[8]?j||(j=ie(),j.c(),j.m(x.parentNode,x)):j&&(j.d(1),j=null),e[8]||""==e[0][0].slug?N&&(O(),H(N,1,1,(()=>{N=null})),P()):N?(N.p(e,t),257&t&&A(N,1)):(N=de(e),N.c(),A(N,1),N.m(k.parentNode,k)),e[6]?T?T.p(e,t):(T=fe(e),T.c(),T.m(C.parentNode,C)):T&&(T.d(1),T=null)},i(e){q||(A($.$$.fragment,e),A(N),q=!0)},o(e){H($.$$.fragment,e),H(N),q=!1},d(e){e&&u(t),e&&u(n),e&&u(l),e&&u(o),e&&u(i),I($),E&&E.d(),e&&u(b),e&&u(y),e&&u(w),j&&j.d(e),e&&u(x),N&&N.d(e),e&&u(k),T&&T.d(e),e&&u(C),_=!1,r(S)}}}function ue(t){let n,r;return n=new se({props:{user:t[9]}}),{c(){z(n.$$.fragment)},m(e,t){B(n,e,t),r=!0},p:e,i(e){r||(A(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){I(n,e)}}}function ae(t){let n,r,l;return{c(){n=a("div"),n.textContent="Click here to search for my portfolio at chancellor.tech!",m(n,"class","helper-alert svelte-15gnl5l")},m(e,o){c(e,n,o),r||(l=g(n,"click",t[14]),r=!0)},p:e,d(e){e&&u(n),r=!1,l()}}}function ie(e){let t;return{c(){t=a("div"),m(t,"class","loader svelte-15gnl5l")},m(e,n){c(e,t,n)},d(e){e&&u(t)}}}function de(e){let t,n,r,l,o,f,g,p,$,v,b=e[0][e[1]].slug+"";return n=new D({}),n.$on("decrement",e[16]),$=new R({}),$.$on("increment",e[17]),{c(){t=a("div"),z(n.$$.fragment),r=d(),l=a("a"),o=i("/"),f=i(b),p=d(),z($.$$.fragment),m(l,"href",g=te+"/"+e[0][e[1]].slug),m(l,"class","results svelte-15gnl5l"),m(t,"class","slugs-container svelte-15gnl5l")},m(e,u){c(e,t,u),B(n,t,null),s(t,r),s(t,l),s(l,o),s(l,f),s(t,p),B($,t,null),v=!0},p(e,t){(!v||3&t)&&b!==(b=e[0][e[1]].slug+"")&&h(f,b),(!v||3&t&&g!==(g=te+"/"+e[0][e[1]].slug))&&m(l,"href",g)},i(e){v||(A(n.$$.fragment,e),A($.$$.fragment,e),v=!0)},o(e){H(n.$$.fragment,e),H($.$$.fragment,e),v=!1},d(e){e&&u(t),I(n),I($)}}}function fe(e){let t,n;return{c(){t=a("p"),n=i(e[6]),m(t,"class","error svelte-15gnl5l")},m(e,r){c(e,t,r),s(t,n)},p(e,t){64&t&&h(n,e[6])},d(e){e&&u(t)}}}function ge(e){let t,n,r,l,o,i,f,h;const $=[ue,ce],v=[];function b(e,t){return!e[9]||e[2]||e[3]?e[9]||e[2]||e[3]?-1:1:0}return~(l=b(e))&&(o=v[l]=$[l](e)),{c(){t=a("main"),n=a("button"),n.textContent="Serenity",r=d(),o&&o.c(),m(n,"class","peace svelte-15gnl5l"),p(n,"serenity",e[3]),m(t,"class","svelte-15gnl5l")},m(o,u){c(o,t,u),s(t,n),s(t,r),~l&&v[l].m(t,null),i=!0,f||(h=g(n,"click",e[11]),f=!0)},p(e,[r]){8&r&&p(n,"serenity",e[3]);let s=l;l=b(e),l===s?~l&&v[l].p(e,r):(o&&(O(),H(v[s],1,1,(()=>{v[s]=null})),P()),~l?(o=v[l],o?o.p(e,r):(o=v[l]=$[l](e),o.c()),A(o,1),o.m(t,null)):o=null)},i(e){i||(A(o),i=!0)},o(e){H(o),i=!1},d(e){e&&u(t),~l&&v[l].d(),f=!1,h()}}}function me(e,t,n){let r,l=!0,o=!1,s="",c=!1,u=!0,a=!1,i=[{slug:""}],d=0;var f;f=async()=>{n(2,l=!1)},b().$$.on_mount.push(f);let g=async()=>{if(n(6,r=null),0===s.length)return n(5,c=!0);n(5,c=!1),n(8,a=!0);let[e,t]=await(async e=>fetch(`${te}/url`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}).then((e=>e.json())).then((e=>e.message?Promise.reject(e.message):[e,null])).catch((e=>[[{slug:""}],e])))(s);n(0,i=e),t&&n(6,r=t),n(8,a=!1)};return e.$$.update=()=>{3&e.$$.dirty&&d<0&&n(1,d=i.length-1),3&e.$$.dirty&&d>i.length-1&&n(1,d=0)},[i,d,l,o,s,c,r,u,a,undefined,g,()=>n(3,o=!o),()=>location.href=`${te}/auth`,({detail:e})=>{n(7,u=!1),n(4,s=e)},()=>{n(7,u=!1),n(4,s="chancellor.tech")},()=>g(),()=>n(1,d-=1),()=>n(1,d+=1)]}return new class extends F{constructor(e){super(),W(this,e,me,ge,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
